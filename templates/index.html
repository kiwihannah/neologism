<!DOCTYPE html>
<html lang="utf-8">

<head>
    <!-- Webpage Title -->
    <title>new neologism dic</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

    <script type="text/javascript">

        $(document).ready(function () {
            $('#no-result').hide();
        });

        function findWord() {
            // get post value
            let keyword = $('#keyword').val()

            // sending values
            $.ajax({
                type: "POST",
                url: "/find",
                data: {
                    keyword_give: keyword
                },
                success: function (response) {
                    // alert(response["msg"]);
                    $('#out-definition').attr("value", response["msg"])

                    if (response["msg"] == 'no results') {
                        if (window.confirm("Do you want to save this word?")) {
                            $('#no-result').show();
                            $('#result').hide();
                        }
                    }
                }
            });
        }

        function newWords() {
            // get post value
            let new_word = $('#word').val()
            let new_definition = $('#definition').val()
            let nowTime = new Date().toLocaleDateString().split('T')[0];

            // sending values
            $.ajax({
                type: "POST",
                url: "/new",
                data: {
                    word_give: new_word,
                    definition_give: new_definition,
                    time_give: nowTime
                },
                success: function (response) {
                    alert(response["msg"]);
                    window.location.reload();
                }
            })
        }

    </script>

</head>

<body>

    <!--    search for words    -->
    <div class="container" id="result">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">input</span>
            </div>
            <input type="text" class="form-control" id="keyword">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">result</span>
            </div>
            <textarea class="form-control" id="out-definition" cols="30" rows="5"></textarea>
        </div>
        <div class="review">
            <button onclick="findWord()" type="button" class="btn btn-primary">search</button>
        </div>
    </div>

    <!--    add new words    -->
    <div class="container" id="no-result">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">신조어 이름</span>
            </div>
            <input type="text" class="form-control" id="word">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">신조어 뜻</span>
            </div>
            <textarea class="form-control" id="definition" cols="30" rows="5"></textarea>
        </div>
        <div class="review">
            <button onclick="newWords()" type="button" class="btn btn-primary">신조어 저장하기</button>
            <button onclick="javascript:window.location.reload();" type="button" class="btn btn-primary">다시 검색</button>
        </div>
    </div>

</body>

</html>